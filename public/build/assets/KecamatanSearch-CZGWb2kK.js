import{a as s,j as e,L as f,c as y}from"./index.esm-Bxde1Ebc.js";function j(n,c){let r=null;return(...l)=>new Promise(o=>{r&&clearTimeout(r),r=setTimeout(()=>{o(n(...l))},c)})}function w(){const[n,c]=s.useState(""),[r,l]=s.useState([]),[o,h]=s.useState(null),[u,m]=s.useState(!1),[i,d]=s.useState(!1),g=s.useCallback(j(async a=>{if(a.trim()===""){l([]),d(!1),m(!1);return}m(!0);try{const t=await y.get("/api/locations",{params:{search:a}});l(t.data),d(t.data.length>0)}catch(t){console.error("Error fetching kecamatan data:",t),l([]),d(!1)}finally{m(!1)}},300),[]);s.useEffect(()=>{g(n)},[n,g]);const b=a=>{const t=a.target.value;c(t),h(null),t.trim()?g(t):d(!1)},p=a=>{h(a),c(`${a.kecamatan}, ${a.kota}`),l([]),d(!1)};return s.useEffect(()=>{const a=t=>{const x=document.getElementById("search-container");x&&!x.contains(t.target)&&d(!1)};return i?document.addEventListener("mousedown",a):document.removeEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[i]),e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(f,{title:"Kecamatan Search"}),e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Kecamatan Search"})})}),e.jsx("main",{children:e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-3xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{id:"search-container",className:"relative mb-4",children:[e.jsx("label",{htmlFor:"search-kecamatan",className:"block text-sm font-medium mb-1",children:"Search Kecamatan, Kota, atau Provinsi"}),e.jsx("input",{type:"text",id:"search-kecamatan",value:n,onChange:b,onFocus:()=>n.trim()&&r.length>0&&d(!0),placeholder:"contoh: Menteng, Jakarta Pusat, DKI Jakarta",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:text-gray-200",autoComplete:"off"}),u&&e.jsx("div",{className:"absolute right-3 top-9 text-sm text-gray-500",children:"Loading..."}),i&&r.length>0&&e.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto",children:r.map(a=>e.jsxs("li",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer",onMouseDown:()=>p(a),children:[a.kecamatan,", ",a.kota,", ",a.provinsi]},a.id))}),i&&r.length===0&&n.trim()&&!u&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg p-4 text-center text-gray-500",children:"No results found."})]}),o&&e.jsxs("div",{className:"mt-6 p-4 border border-gray-200 dark:border-gray-700 rounded-md bg-gray-50 dark:bg-gray-900",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Selected Location Details:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",o.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kecamatan:"})," ",o.kecamatan]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kota/Kabupaten:"})," ",o.kota]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Provinsi:"})," ",o.provinsi]})]})]})})})})})]})}export{w as default};
